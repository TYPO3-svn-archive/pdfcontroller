plugin.tx_pdfcontroller_pi2 {
  button = IMAGE
  button {
    wrap = |&nbsp;
    file = ###IMAGEFILE###
    altText = TEXT
    altText {
      value = Download content as PDF file
      lang {
        de = Inhalt als PDF-Datei herunterladen
      }
    }
    titleText < .altText
    imageLinkWrap = 1
    imageLinkWrap {
      enable = 1
      typolink {
        parameter         = ###PARAMETER###
        additionalParams  = ###ADDITIONALPARAMS###
        ATagParams        = rel="nofollow"
      }
    }
  }
  flexform {
    sDEF {
        // Path to the image file with the PDF icon
      imagefile = TEXT
      imagefile {
        value = EXT:pdfcontroller/res/images/pdf.png
      }
    }
  }
  master_templates {
    pdf_and_print_button = COA
    pdf_and_print_button {
      wrap = <div class="tx-pdfcontroller-pi2"><ul> | </ul></div>
        // PDF icon
      10 = IMAGE
      10 {
        wrap = <li>|</li>
        file = typo3conf/ext/pdfcontroller/res/images/pdf.png
        altText = TEXT
        altText {
          value = Download content as PDF file
          lang {
            de = Inhalt als PDF-Datei herunterladen
          }
        }
        titleText < .altText
        imageLinkWrap = 1
        imageLinkWrap {
          enable = 1
          typolink {
            parameter         = {$plugin.tx_pdfcontroller_pi2.page.pdf_controller}
            additionalParams  = TEXT
            additionalParams {
              wrap = &tx_pdfcontroller_pi1[URL]={getIndpEnv:TYPO3_SITE_URL}|
              insertData = 1
              typolink {
                parameter = {page:uid},{$plugin.tx_pdfcontroller_pi2.typeNum.print}
                parameter {
                  insertData = 1
                }
                addQueryString  = 1
                addQueryString {
                  exclude = id
                }
                returnLast      = url
              }
            }
            ATagParams = rel="nofollow"
          }
        }
      }
        // Print icon
      20 = IMAGE
      20 {
        wrap = <li>|</li>
        file = typo3conf/ext/pdfcontroller/res/images/printer.png
        altText = TEXT
        altText {
          value = Optimized printing
          lang {
            de = Optimierter Druck
          }
        }
        titleText < .altText
        imageLinkWrap = 1
        imageLinkWrap {
          enable = 1
          typolink {
            parameter = {page:uid},{$plugin.tx_pdfcontroller_pi2.typeNum.print}
            parameter {
              insertData = 1
            }
            addQueryString  = 1
            ATagParams      = rel="nofollow"
          }
        }
      }
    }
    add_parameter {
        // Parameter of mm_forum plugin 1
      tx_mmforum_pi1 = COA
      tx_mmforum_pi1 {
          // fid
        10 = TEXT
        10 {
          dataWrap        = &tx_mmforum_pi1[fid]={GP:tx_mmforum_pi1|fid}
          if.isTrue.data  = GPvar:tx_mmforum_pi1|fid
        }
          // tid
        20 = TEXT
        20 {
          dataWrap        = &tx_mmforum_pi1[tid]={GP:tx_mmforum_pi1|tid}
          if.isTrue.data  = GPvar:tx_mmforum_pi1|tid
        }
          // quote
        30 = TEXT
        30 {
          dataWrap        = &tx_mmforum_pi1[quote]={GP:tx_mmforum_pi1|quote}
          if.isTrue.data  = GPvar:tx_mmforum_pi1|quote
        }
          // page
        40 = TEXT
        40 {
          dataWrap        = &tx_mmforum_pi1[page]={GP:tx_mmforum_pi1|page}
          if.isTrue.data  = GPvar:tx_mmforum_pi1|page
        }
          // pid
        50 = TEXT
        50 {
          dataWrap        = &tx_mmforum_pi1[pid]={GP:tx_mmforum_pi1|pid}
          if.isTrue.data  = GPvar:tx_mmforum_pi1|pid
        }
      }
    }
  }
  _CSS_DEFAULT_STYLE (
    .tx-pdfcontroller-pi2 {
      text-align: right;
    }
    .tx-pdfcontroller-pi2 ul {
      font-weight: bold;
      list-style-type: none;
      margin: 0;
      padding: 0;
    }
    .tx-pdfcontroller-pi2 ul li {
      display:inline;
      margin: 0;
      padding-left:.6em;
    }
  )
}